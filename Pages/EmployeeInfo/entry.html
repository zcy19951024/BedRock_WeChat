<!doctype html>
<html>
	<head>
		<meta charset="UTF-8">		
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../../css/mui.picker.min.css" />
		<script src="../../js/mui.min.js"></script>
		<script type="text/javascript" src="../../js/mui.picker.min.js" ></script>		
		<style>
			/*标题字体为粗体（ps:原生样式上添加）*/
			/*间距div*/
			.content-padding{
				height: 10px;
			}
			/*背景为白色的间距div*/
			.content-content-padding{
				height: 30px;background-color:#FFFFFF;margin-top:10px;
			}
			/*设置行高为70，背景为白色 （ps:原生样式上添加）*/
			.mui-input-row{
				height: 70px;background-color: #FFFFFF;
				width:100%;
			}
			/*办理手续的文本宽度*/
			#content-label-manage{
				width:185px;
			}
			/*办理手续的文本框宽度*/
			#entrystart,#entryfinish{
				text-align:right;width: 135px;
			}
			/*试用期的文本宽度*/
			#content-label-period{
				width:180px;
			}
			/*试用期的文本框宽度*/
			#periodstart,#periodfinish{
				text-align:right;width: 135px;
			}
			/*确定按钮的颜色*/
			#buttom{
				background-color:#66CCFF;border-color: #66CCFF;
			}
		</style>
		<script type="text/javascript">
			/*mui.init()
			function ha(){
				alert(11);
				document.getElementById("entrystart").addEventListener('input',function(){
					console.log(this.value);
				});
				alert(22);
			}	
		*/
			mui.init()
			(function($) {
				$.init();
				//办理手续开始时间
				var entrystart = $('#entrystart')[0];
				var entrystarttime = $('.entrystarttime');
				entrystarttime.each(function(i, btn) {
					btn.addEventListener('tap', function() {
						var optionsJson = this.getAttribute('data-options') || '{}';
						var options = JSON.parse(optionsJson);
						var id = this.getAttribute('id');
						var picker = new $.DtPicker(options);
						picker.show(function(rs) {
							entrystart.value =rs.value;
							picker.dispose();
						});
					}, false);
				});
			//办理手续结束时间
			var entryfinish=$('#entryfinish')[0];
			var entryfinishtime=$('.entryfinishtime');
			entryfinishtime.each(function(i, btne) {
				btne.addEventListener('tap', function() {
					var optionsJson = this.getAttribute('data-options') || '{}';
					var options = JSON.parse(optionsJson);
					var id = this.getAttribute('id');var picker = new $.DtPicker(options);
					picker.show(function(rs) {
						entryfinish.value =rs.value;
						picker.dispose();
					});
				}, false);
			});
			//试用期开始时间
			var periodstart=$('#periodstart')[0];
			var periodstarttime=$('.periodstarttime');
			periodstarttime.each(function(i, btne) {
				btne.addEventListener('tap', function() {
					var optionsJson = this.getAttribute('data-options') || '{}';
					var options = JSON.parse(optionsJson);
					var id = this.getAttribute('id');var picker = new $.DtPicker(options);
					picker.show(function(rs) {
						periodstart.value =rs.value;
						picker.dispose();
					});
				}, false);
			});		
			//试用期结束时间
			var periodfinish=$('#periodfinish')[0];
			var periodfinishtime=$('.periodfinishtime');
			periodfinishtime.each(function(i, btne) {
				btne.addEventListener('tap', function() {
					var optionsJson = this.getAttribute('data-options') || '{}';
					var options = JSON.parse(optionsJson);
					var id = this.getAttribute('id');var picker = new $.DtPicker(options);
					picker.show(function(rs) {
						periodfinish.value =rs.value;
						picker.dispose();
					});
				}, false);
			});				
		})(mui);				
			function submitinput(){
				var entrystart=document.getElementById("entrystart").value;
				var entryfinish=document.getElementById("entryfinish").value;
				var periodstart=document.getElementById("periodstart").value;				
				var periodfinish=document.getElementById("periodfinish").value;	
				if(entrystart==""||entryfinish==""||periodstart==""||periodfinish==""){
					alert("请将信息填写完整！");
				}
				else{
					alert("111");
				/*console.log(document.getElementsByTagName('input')[0].value);//打印出test	*/		
				mui.ajax('http://localhost/Bedrock_WeCath_WeiXin/api/Entry',{
				data:{
					"ApplyStartTime":entrystart,
					"ApplyEndTime":entryfinish,
					"ProbationStartTime":periodstart,
					"ProbationEndTime":periodfinish,
				},
				dataType:'json',//服务器返回json格式数据
				type:'POST',//HTTP请求类型
				timeout:10000,//超时时间设置为10秒；
				headers:{'Content-Type':'application/json'},	              
				success:function(data){
						alert(JSON.stringify(data)); 
						alert("添加成功！");
				    },
		        error:function(xhr,type,errorThrown){
		            //异常处理；
		            console.log(type);
		        }
			});	
			}
			}
		</script>	
	</head>
	<body>		
	<header class="mui-bar mui-bar-nav" >
		<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
		<h1 class="mui-title">入职</h1>
	</header>		
	<div class="mui-content">			
		<div class="content-content-padding"></div>
		<div class="mui-input-row">
		    <label id="content-label-manage">办理手续开始时间：</label>
		    <input type="text" placeholder="请输入时间" data-options='{"type":"date","beginYear":2014,"endYear":2016}' id='entrystart' class="entrystarttime">
		</div>
		<div class="mui-input-row">
		    <label id="content-label-manage">办理手续结束时间：</label>
		    <input type="text" placeholder="请输入时间" data-options='{"type":"date","beginYear":2014,"endYear":2016}' id="entryfinish" class="entryfinishtime">
		</div>	
		<div class="content-content-padding"></div>
		<div class="mui-input-row">
		    <label id="content-label-period">试用期开始时间：</label>
		    <input type="text" placeholder="请输入时间" data-options='{"type":"date","beginYear":2014,"endYear":2016}' id="periodstart" class="periodstarttime">
		</div>	
		<div class="mui-input-row">
		    <label id="content-label-period">试用期结束时间：</label>
		    <input type="text" placeholder="请输入时间" data-options='{"type":"date","beginYear":2014,"endYear":2016}' id="periodfinish" class="periodfinishtime">
		</div>	
		<div class="content-padding"></div>
		<button type="button" class="mui-btn mui-btn-blue mui-btn-block" id="buttom" onclick="submitinput()">确定</button>
	</div>		

	</body>

</html>